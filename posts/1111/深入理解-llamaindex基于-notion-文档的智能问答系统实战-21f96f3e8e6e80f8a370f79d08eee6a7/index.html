<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>xiaoliu's blog</title><meta name=keywords content><meta name=description content="æ·±å…¥ç†è§£ LlamaIndexï¼šåŸºäº Notion æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®æˆ˜
type: Post
status: Published
date: 2025/06/27
tags: ai, llamaindex, notion
category: æŠ€æœ¯åˆ†äº«
åœ¨äººå·¥æ™ºèƒ½æ—¥ç›Šèå…¥å¼€å‘è€…å·¥å…·é“¾çš„ä»Šå¤©ï¼Œæˆ‘æœ€åˆè®¡åˆ’ä½¿ç”¨ LangChain æ„å»ºä¸€ä¸ªåŸºäºæ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚LangChain ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿå°†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸å„ç§æ•°æ®æºå’Œåº”ç”¨åœºæ™¯è¿æ¥èµ·æ¥ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚
ç„¶è€Œï¼Œåœ¨æ·±å…¥ç ”ç©¶å’Œå®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº† LlamaIndexï¼ˆå‰èº«ä¸º GPT Indexï¼‰è¿™ä¸ªæ›´ä¸ºä¸“æ³¨äºçŸ¥è¯†æ£€ç´¢å’Œé—®ç­”çš„æ¡†æ¶ã€‚LlamaIndex åœ¨å¤„ç†æ–‡æ¡£ç´¢å¼•ã€æ„å»ºçŸ¥è¯†åº“ä»¥åŠç”Ÿæˆä¸Šä¸‹æ–‡ç›¸å…³å›ç­”æ–¹é¢ï¼Œæä¾›äº†æ›´ä¸ºç²¾ç»†å’Œç›´è§‚çš„å·¥å…·ã€‚å°¤å…¶æ˜¯å¯¹äºæˆ‘è¿™ä¸ªéœ€è¦åŸºäº Notion æ–‡æ¡£æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿçš„åœºæ™¯ï¼ŒLlamaIndex æä¾›äº†æ›´åŠ æ— ç¼çš„é›†æˆä½“éªŒã€‚
æœ¬æ–‡å°†åˆ†äº«æˆ‘ä» LangChain è½¬å‘ LlamaIndex çš„ç»å†ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ LlamaIndex æ„å»ºä¸€ä¸ªèƒ½å¤Ÿç†è§£ã€æ£€ç´¢å¹¶å›ç­” Notion æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚æ— è®ºä½ æ˜¯ AI å¼€å‘æ–°æ‰‹ï¼Œè¿˜æ˜¯å¯»æ‰¾æ›´é«˜æ•ˆæ–‡æ¡£å¤„ç†æ–¹æ¡ˆçš„èµ„æ·±å¼€å‘è€…ï¼Œå¸Œæœ›è¿™ç¯‡å®æˆ˜åˆ†äº«èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘ã€‚
ä»€ä¹ˆæ˜¯ LlamaIndexï¼Ÿ
LlamaIndexï¼ˆåŸå GPT Indexï¼‰æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¸®ä½ æŠŠå„ç§æ ¼å¼çš„æ–‡æ¡£å˜æˆç»“æ„åŒ–çš„ç´¢å¼•ï¼Œæ–¹ä¾¿å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”¨æ›´å°‘çš„ä¸Šä¸‹æ–‡è½»æ¾ç†è§£å’Œå›ç­”é—®é¢˜ã€‚ç®€å•è¯´å°±æ˜¯ï¼šå¸®ä½ æŠŠå¤§æµ·æé’ˆå˜æˆå°æ± å¡˜é’“é±¼ã€‚
å®˜ç½‘ï¼šhttps://www.llamaindex.ai/

æˆ‘ä»¬çš„ç›®æ ‡

ä» Notion åŠ è½½æ–‡æ¡£ï¼ˆä¸é™æ·±åº¦é€’å½’ï¼‰
ç”¨ HuggingFace çš„åµŒå…¥æ¨¡å‹åšå‘é‡åŒ–
è‡ªå®šä¹‰ DeepSeek LLM åšé—®ç­”
æŒä¹…åŒ–ç´¢å¼•ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ç”¨


é¡¹ç›®ç»“æ„åŠä»£ç è¯´æ˜
1. ç¯å¢ƒå‡†å¤‡

pip install llama-index notion-client python-dotenv requests
å¹¶ä¸”ä½ éœ€è¦åœ¨ .env æ–‡ä»¶é‡Œé…ç½®ï¼š"><meta name=author content><link rel=canonical href=https://frank9306.github.io/posts/1111/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-llamaindex%E5%9F%BA%E4%BA%8E-notion-%E6%96%87%E6%A1%A3%E7%9A%84%E6%99%BA%E8%83%BD%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98-21f96f3e8e6e80f8a370f79d08eee6a7/><link crossorigin=anonymous href=/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://frank9306.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://frank9306.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://frank9306.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://frank9306.github.io/apple-touch-icon.png><link rel=mask-icon href=https://frank9306.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://frank9306.github.io/posts/1111/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-llamaindex%E5%9F%BA%E4%BA%8E-notion-%E6%96%87%E6%A1%A3%E7%9A%84%E6%99%BA%E8%83%BD%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98-21f96f3e8e6e80f8a370f79d08eee6a7/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://frank9306.github.io/posts/1111/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-llamaindex%E5%9F%BA%E4%BA%8E-notion-%E6%96%87%E6%A1%A3%E7%9A%84%E6%99%BA%E8%83%BD%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98-21f96f3e8e6e80f8a370f79d08eee6a7/"><meta property="og:site_name" content="xiaoliu's blog"><meta property="og:title" content="xiaoliu's blog"><meta property="og:description" content="æ·±å…¥ç†è§£ LlamaIndexï¼šåŸºäº Notion æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®æˆ˜ type: Post status: Published date: 2025/06/27 tags: ai, llamaindex, notion category: æŠ€æœ¯åˆ†äº«
åœ¨äººå·¥æ™ºèƒ½æ—¥ç›Šèå…¥å¼€å‘è€…å·¥å…·é“¾çš„ä»Šå¤©ï¼Œæˆ‘æœ€åˆè®¡åˆ’ä½¿ç”¨ LangChain æ„å»ºä¸€ä¸ªåŸºäºæ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚LangChain ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿå°†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸å„ç§æ•°æ®æºå’Œåº”ç”¨åœºæ™¯è¿æ¥èµ·æ¥ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚
ç„¶è€Œï¼Œåœ¨æ·±å…¥ç ”ç©¶å’Œå®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº† LlamaIndexï¼ˆå‰èº«ä¸º GPT Indexï¼‰è¿™ä¸ªæ›´ä¸ºä¸“æ³¨äºçŸ¥è¯†æ£€ç´¢å’Œé—®ç­”çš„æ¡†æ¶ã€‚LlamaIndex åœ¨å¤„ç†æ–‡æ¡£ç´¢å¼•ã€æ„å»ºçŸ¥è¯†åº“ä»¥åŠç”Ÿæˆä¸Šä¸‹æ–‡ç›¸å…³å›ç­”æ–¹é¢ï¼Œæä¾›äº†æ›´ä¸ºç²¾ç»†å’Œç›´è§‚çš„å·¥å…·ã€‚å°¤å…¶æ˜¯å¯¹äºæˆ‘è¿™ä¸ªéœ€è¦åŸºäº Notion æ–‡æ¡£æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿçš„åœºæ™¯ï¼ŒLlamaIndex æä¾›äº†æ›´åŠ æ— ç¼çš„é›†æˆä½“éªŒã€‚
æœ¬æ–‡å°†åˆ†äº«æˆ‘ä» LangChain è½¬å‘ LlamaIndex çš„ç»å†ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ LlamaIndex æ„å»ºä¸€ä¸ªèƒ½å¤Ÿç†è§£ã€æ£€ç´¢å¹¶å›ç­” Notion æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚æ— è®ºä½ æ˜¯ AI å¼€å‘æ–°æ‰‹ï¼Œè¿˜æ˜¯å¯»æ‰¾æ›´é«˜æ•ˆæ–‡æ¡£å¤„ç†æ–¹æ¡ˆçš„èµ„æ·±å¼€å‘è€…ï¼Œå¸Œæœ›è¿™ç¯‡å®æˆ˜åˆ†äº«èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘ã€‚
ä»€ä¹ˆæ˜¯ LlamaIndexï¼Ÿ LlamaIndexï¼ˆåŸå GPT Indexï¼‰æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¸®ä½ æŠŠå„ç§æ ¼å¼çš„æ–‡æ¡£å˜æˆç»“æ„åŒ–çš„ç´¢å¼•ï¼Œæ–¹ä¾¿å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”¨æ›´å°‘çš„ä¸Šä¸‹æ–‡è½»æ¾ç†è§£å’Œå›ç­”é—®é¢˜ã€‚ç®€å•è¯´å°±æ˜¯ï¼šå¸®ä½ æŠŠå¤§æµ·æé’ˆå˜æˆå°æ± å¡˜é’“é±¼ã€‚
å®˜ç½‘ï¼šhttps://www.llamaindex.ai/
æˆ‘ä»¬çš„ç›®æ ‡ ä» Notion åŠ è½½æ–‡æ¡£ï¼ˆä¸é™æ·±åº¦é€’å½’ï¼‰ ç”¨ HuggingFace çš„åµŒå…¥æ¨¡å‹åšå‘é‡åŒ– è‡ªå®šä¹‰ DeepSeek LLM åšé—®ç­” æŒä¹…åŒ–ç´¢å¼•ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ç”¨ é¡¹ç›®ç»“æ„åŠä»£ç è¯´æ˜ 1. ç¯å¢ƒå‡†å¤‡ pip install llama-index notion-client python-dotenv requests å¹¶ä¸”ä½ éœ€è¦åœ¨ .env æ–‡ä»¶é‡Œé…ç½®ï¼š"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="æ·±å…¥ç†è§£ LlamaIndexï¼šåŸºäº Notion æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®æˆ˜
type: Post
status: Published
date: 2025/06/27
tags: ai, llamaindex, notion
category: æŠ€æœ¯åˆ†äº«
åœ¨äººå·¥æ™ºèƒ½æ—¥ç›Šèå…¥å¼€å‘è€…å·¥å…·é“¾çš„ä»Šå¤©ï¼Œæˆ‘æœ€åˆè®¡åˆ’ä½¿ç”¨ LangChain æ„å»ºä¸€ä¸ªåŸºäºæ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚LangChain ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿå°†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸å„ç§æ•°æ®æºå’Œåº”ç”¨åœºæ™¯è¿æ¥èµ·æ¥ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚
ç„¶è€Œï¼Œåœ¨æ·±å…¥ç ”ç©¶å’Œå®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº† LlamaIndexï¼ˆå‰èº«ä¸º GPT Indexï¼‰è¿™ä¸ªæ›´ä¸ºä¸“æ³¨äºçŸ¥è¯†æ£€ç´¢å’Œé—®ç­”çš„æ¡†æ¶ã€‚LlamaIndex åœ¨å¤„ç†æ–‡æ¡£ç´¢å¼•ã€æ„å»ºçŸ¥è¯†åº“ä»¥åŠç”Ÿæˆä¸Šä¸‹æ–‡ç›¸å…³å›ç­”æ–¹é¢ï¼Œæä¾›äº†æ›´ä¸ºç²¾ç»†å’Œç›´è§‚çš„å·¥å…·ã€‚å°¤å…¶æ˜¯å¯¹äºæˆ‘è¿™ä¸ªéœ€è¦åŸºäº Notion æ–‡æ¡£æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿçš„åœºæ™¯ï¼ŒLlamaIndex æä¾›äº†æ›´åŠ æ— ç¼çš„é›†æˆä½“éªŒã€‚
æœ¬æ–‡å°†åˆ†äº«æˆ‘ä» LangChain è½¬å‘ LlamaIndex çš„ç»å†ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ LlamaIndex æ„å»ºä¸€ä¸ªèƒ½å¤Ÿç†è§£ã€æ£€ç´¢å¹¶å›ç­” Notion æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚æ— è®ºä½ æ˜¯ AI å¼€å‘æ–°æ‰‹ï¼Œè¿˜æ˜¯å¯»æ‰¾æ›´é«˜æ•ˆæ–‡æ¡£å¤„ç†æ–¹æ¡ˆçš„èµ„æ·±å¼€å‘è€…ï¼Œå¸Œæœ›è¿™ç¯‡å®æˆ˜åˆ†äº«èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘ã€‚
ä»€ä¹ˆæ˜¯ LlamaIndexï¼Ÿ
LlamaIndexï¼ˆåŸå GPT Indexï¼‰æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¸®ä½ æŠŠå„ç§æ ¼å¼çš„æ–‡æ¡£å˜æˆç»“æ„åŒ–çš„ç´¢å¼•ï¼Œæ–¹ä¾¿å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”¨æ›´å°‘çš„ä¸Šä¸‹æ–‡è½»æ¾ç†è§£å’Œå›ç­”é—®é¢˜ã€‚ç®€å•è¯´å°±æ˜¯ï¼šå¸®ä½ æŠŠå¤§æµ·æé’ˆå˜æˆå°æ± å¡˜é’“é±¼ã€‚
å®˜ç½‘ï¼šhttps://www.llamaindex.ai/

æˆ‘ä»¬çš„ç›®æ ‡

ä» Notion åŠ è½½æ–‡æ¡£ï¼ˆä¸é™æ·±åº¦é€’å½’ï¼‰
ç”¨ HuggingFace çš„åµŒå…¥æ¨¡å‹åšå‘é‡åŒ–
è‡ªå®šä¹‰ DeepSeek LLM åšé—®ç­”
æŒä¹…åŒ–ç´¢å¼•ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ç”¨


é¡¹ç›®ç»“æ„åŠä»£ç è¯´æ˜
1. ç¯å¢ƒå‡†å¤‡

pip install llama-index notion-client python-dotenv requests
å¹¶ä¸”ä½ éœ€è¦åœ¨ .env æ–‡ä»¶é‡Œé…ç½®ï¼š"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://frank9306.github.io/posts/"},{"@type":"ListItem","position":2,"name":"","item":"https://frank9306.github.io/posts/1111/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-llamaindex%E5%9F%BA%E4%BA%8E-notion-%E6%96%87%E6%A1%A3%E7%9A%84%E6%99%BA%E8%83%BD%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98-21f96f3e8e6e80f8a370f79d08eee6a7/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"æ·±å…¥ç†è§£ LlamaIndexï¼šåŸºäº Notion æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®æˆ˜ type: Post status: Published date: 2025/06/27 tags: ai, llamaindex, notion category: æŠ€æœ¯åˆ†äº«\nåœ¨äººå·¥æ™ºèƒ½æ—¥ç›Šèå…¥å¼€å‘è€…å·¥å…·é“¾çš„ä»Šå¤©ï¼Œæˆ‘æœ€åˆè®¡åˆ’ä½¿ç”¨ LangChain æ„å»ºä¸€ä¸ªåŸºäºæ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚LangChain ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿå°†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸å„ç§æ•°æ®æºå’Œåº”ç”¨åœºæ™¯è¿æ¥èµ·æ¥ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\nç„¶è€Œï¼Œåœ¨æ·±å…¥ç ”ç©¶å’Œå®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº† LlamaIndexï¼ˆå‰èº«ä¸º GPT Indexï¼‰è¿™ä¸ªæ›´ä¸ºä¸“æ³¨äºçŸ¥è¯†æ£€ç´¢å’Œé—®ç­”çš„æ¡†æ¶ã€‚LlamaIndex åœ¨å¤„ç†æ–‡æ¡£ç´¢å¼•ã€æ„å»ºçŸ¥è¯†åº“ä»¥åŠç”Ÿæˆä¸Šä¸‹æ–‡ç›¸å…³å›ç­”æ–¹é¢ï¼Œæä¾›äº†æ›´ä¸ºç²¾ç»†å’Œç›´è§‚çš„å·¥å…·ã€‚å°¤å…¶æ˜¯å¯¹äºæˆ‘è¿™ä¸ªéœ€è¦åŸºäº Notion æ–‡æ¡£æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿçš„åœºæ™¯ï¼ŒLlamaIndex æä¾›äº†æ›´åŠ æ— ç¼çš„é›†æˆä½“éªŒã€‚\næœ¬æ–‡å°†åˆ†äº«æˆ‘ä» LangChain è½¬å‘ LlamaIndex çš„ç»å†ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ LlamaIndex æ„å»ºä¸€ä¸ªèƒ½å¤Ÿç†è§£ã€æ£€ç´¢å¹¶å›ç­” Notion æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚æ— è®ºä½ æ˜¯ AI å¼€å‘æ–°æ‰‹ï¼Œè¿˜æ˜¯å¯»æ‰¾æ›´é«˜æ•ˆæ–‡æ¡£å¤„ç†æ–¹æ¡ˆçš„èµ„æ·±å¼€å‘è€…ï¼Œå¸Œæœ›è¿™ç¯‡å®æˆ˜åˆ†äº«èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘ã€‚\nä»€ä¹ˆæ˜¯ LlamaIndexï¼Ÿ LlamaIndexï¼ˆåŸå GPT Indexï¼‰æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¸®ä½ æŠŠå„ç§æ ¼å¼çš„æ–‡æ¡£å˜æˆç»“æ„åŒ–çš„ç´¢å¼•ï¼Œæ–¹ä¾¿å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”¨æ›´å°‘çš„ä¸Šä¸‹æ–‡è½»æ¾ç†è§£å’Œå›ç­”é—®é¢˜ã€‚ç®€å•è¯´å°±æ˜¯ï¼šå¸®ä½ æŠŠå¤§æµ·æé’ˆå˜æˆå°æ± å¡˜é’“é±¼ã€‚\nå®˜ç½‘ï¼šhttps://www.llamaindex.ai/\næˆ‘ä»¬çš„ç›®æ ‡ ä» Notion åŠ è½½æ–‡æ¡£ï¼ˆä¸é™æ·±åº¦é€’å½’ï¼‰ ç”¨ HuggingFace çš„åµŒå…¥æ¨¡å‹åšå‘é‡åŒ– è‡ªå®šä¹‰ DeepSeek LLM åšé—®ç­” æŒä¹…åŒ–ç´¢å¼•ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ç”¨ é¡¹ç›®ç»“æ„åŠä»£ç è¯´æ˜ 1. ç¯å¢ƒå‡†å¤‡ pip install llama-index notion-client python-dotenv requests å¹¶ä¸”ä½ éœ€è¦åœ¨ .env æ–‡ä»¶é‡Œé…ç½®ï¼š\n","keywords":[],"articleBody":"æ·±å…¥ç†è§£ LlamaIndexï¼šåŸºäº Notion æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®æˆ˜ type: Post status: Published date: 2025/06/27 tags: ai, llamaindex, notion category: æŠ€æœ¯åˆ†äº«\nåœ¨äººå·¥æ™ºèƒ½æ—¥ç›Šèå…¥å¼€å‘è€…å·¥å…·é“¾çš„ä»Šå¤©ï¼Œæˆ‘æœ€åˆè®¡åˆ’ä½¿ç”¨ LangChain æ„å»ºä¸€ä¸ªåŸºäºæ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚LangChain ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿå°†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸å„ç§æ•°æ®æºå’Œåº”ç”¨åœºæ™¯è¿æ¥èµ·æ¥ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\nç„¶è€Œï¼Œåœ¨æ·±å…¥ç ”ç©¶å’Œå®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº† LlamaIndexï¼ˆå‰èº«ä¸º GPT Indexï¼‰è¿™ä¸ªæ›´ä¸ºä¸“æ³¨äºçŸ¥è¯†æ£€ç´¢å’Œé—®ç­”çš„æ¡†æ¶ã€‚LlamaIndex åœ¨å¤„ç†æ–‡æ¡£ç´¢å¼•ã€æ„å»ºçŸ¥è¯†åº“ä»¥åŠç”Ÿæˆä¸Šä¸‹æ–‡ç›¸å…³å›ç­”æ–¹é¢ï¼Œæä¾›äº†æ›´ä¸ºç²¾ç»†å’Œç›´è§‚çš„å·¥å…·ã€‚å°¤å…¶æ˜¯å¯¹äºæˆ‘è¿™ä¸ªéœ€è¦åŸºäº Notion æ–‡æ¡£æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿçš„åœºæ™¯ï¼ŒLlamaIndex æä¾›äº†æ›´åŠ æ— ç¼çš„é›†æˆä½“éªŒã€‚\næœ¬æ–‡å°†åˆ†äº«æˆ‘ä» LangChain è½¬å‘ LlamaIndex çš„ç»å†ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ LlamaIndex æ„å»ºä¸€ä¸ªèƒ½å¤Ÿç†è§£ã€æ£€ç´¢å¹¶å›ç­” Notion æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚æ— è®ºä½ æ˜¯ AI å¼€å‘æ–°æ‰‹ï¼Œè¿˜æ˜¯å¯»æ‰¾æ›´é«˜æ•ˆæ–‡æ¡£å¤„ç†æ–¹æ¡ˆçš„èµ„æ·±å¼€å‘è€…ï¼Œå¸Œæœ›è¿™ç¯‡å®æˆ˜åˆ†äº«èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘ã€‚\nä»€ä¹ˆæ˜¯ LlamaIndexï¼Ÿ LlamaIndexï¼ˆåŸå GPT Indexï¼‰æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¸®ä½ æŠŠå„ç§æ ¼å¼çš„æ–‡æ¡£å˜æˆç»“æ„åŒ–çš„ç´¢å¼•ï¼Œæ–¹ä¾¿å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”¨æ›´å°‘çš„ä¸Šä¸‹æ–‡è½»æ¾ç†è§£å’Œå›ç­”é—®é¢˜ã€‚ç®€å•è¯´å°±æ˜¯ï¼šå¸®ä½ æŠŠå¤§æµ·æé’ˆå˜æˆå°æ± å¡˜é’“é±¼ã€‚\nå®˜ç½‘ï¼šhttps://www.llamaindex.ai/\næˆ‘ä»¬çš„ç›®æ ‡ ä» Notion åŠ è½½æ–‡æ¡£ï¼ˆä¸é™æ·±åº¦é€’å½’ï¼‰ ç”¨ HuggingFace çš„åµŒå…¥æ¨¡å‹åšå‘é‡åŒ– è‡ªå®šä¹‰ DeepSeek LLM åšé—®ç­” æŒä¹…åŒ–ç´¢å¼•ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ç”¨ é¡¹ç›®ç»“æ„åŠä»£ç è¯´æ˜ 1. ç¯å¢ƒå‡†å¤‡ pip install llama-index notion-client python-dotenv requests å¹¶ä¸”ä½ éœ€è¦åœ¨ .env æ–‡ä»¶é‡Œé…ç½®ï¼š\nNOTION_TOKEN=ä½ çš„Notioné›†æˆToken NOTION_PAGE_ID=ä½ çš„Notioné¡µé¢ID DEEPSEEK_API_KEY=ä½ çš„DeepSeek APIå¯†é’¥ llama_index é»˜è®¤æ˜¯ä½¿ç”¨openaiçš„ï¼Œä½†æ˜¯æ²¡ä¹°ï¼Œé¡ºä¾¿ä¹Ÿçœ‹ä¸‹å¦‚ä½•è‡ªå®šä¹‰æ¨¡å‹ã€‚å¦å¤–NOTION_TOKEN å’Œ NOTION_PAGE_ID è·å–å°±ä¸åœ¨èµ˜è¿°ã€‚\n2. Notion æ–‡æ¡£åŠ è½½å·¥å…·ï¼ˆnotion_loader.pyï¼‰ è´Ÿè´£é€’å½’æŠ“å– Notion é¡µé¢åŠå­é¡µé¢æ–‡æœ¬ï¼Œè¿”å› List[Document]ã€‚\nimport os from notion_client import Client from llama_index.core.schema import Document from dotenv import load_dotenv from typing import List load_dotenv() notion = Client(auth=os.getenv(\"NOTION_TOKEN\")) def load_notion_all_docs(page_id: str) -\u003e List[Document]: docs = [] def recurse_blocks(block_id: str): children = notion.blocks.children.list(block_id).get(\"results\", []) texts = [] for block in children: b_type = block[\"type\"] if b_type in [\"paragraph\", \"heading_1\", \"heading_2\", \"heading_3\"]: rich_text = block[b_type].get(\"rich_text\", []) if rich_text: texts.append(\"\".join([t.get(\"plain_text\", \"\") for t in rich_text])) elif b_type == \"child_page\": child_page_id = block[\"id\"] docs.extend(load_notion_all_docs(child_page_id)) # ä½ è¿˜å¯ä»¥æ ¹æ®éœ€æ±‚æ‰©å±•å¤„ç†ä»£ç å—ã€å¼•ç”¨å—ç­‰ if texts: docs.append(Document(text=\"\\n\".join(texts), metadata={\"source\": block_id})) recurse_blocks(page_id) return docs 3. DeepSeek è‡ªå®šä¹‰ LLM é€‚é…å™¨ï¼ˆdeepseek_llm.pyï¼‰ å®ç°äº† CustomLLMï¼Œå¯¹æ¥ DeepSeek APIï¼Œæ”¯æŒåŒæ­¥å’Œæµå¼è¿”å›ã€‚\nfrom typing import Any, Generator import json import requests from pydantic import Field from llama_index.core.llms import CustomLLM, CompletionResponse, CompletionResponseGen, LLMMetadata from llama_index.core.llms.callbacks import llm_completion_callback class DeepSeekLLM(CustomLLM): api_key: str = Field(...) api_base: str = Field(default=\"https://api.deepseek.com/v1\") model_name: str = Field(default=\"deepseek-chat\") temperature: float = Field(default=0.7) max_tokens: int = Field(default=1024) @property def metadata(self) -\u003e LLMMetadata: return LLMMetadata( context_window=8192, num_output=self.max_tokens, model_name=self.model_name, ) def _request(self, prompt: str, stream: bool = False): headers = { \"Authorization\": f\"Bearer {self.api_key}\", \"Content-Type\": \"application/json\", } body = { \"model\": self.model_name, \"messages\": [{\"role\": \"user\", \"content\": prompt}], \"temperature\": self.temperature, \"max_tokens\": self.max_tokens, \"stream\": stream, } res = requests.post( f\"{self.api_base}/chat/completions\", headers=headers, json=body, stream=stream, timeout=60, ) res.raise_for_status() return res @llm_completion_callback() def complete(self, prompt: str, **kwargs: Any) -\u003e CompletionResponse: res = self._request(prompt, stream=False) data = res.json() message = data[\"choices\"][0][\"message\"][\"content\"] return CompletionResponse(text=message) @llm_completion_callback() def stream_complete(self, prompt: str, **kwargs: Any) -\u003e CompletionResponseGen: res = self._request(prompt, stream=True) partial = \"\" for line in res.iter_lines(decode_unicode=True): if line.startswith(\"data: \"): line = line[len(\"data: \"):] if line.strip() == \"[DONE]\": break try: data = json.loads(line) delta = data[\"choices\"][0][\"delta\"].get(\"content\", \"\") partial += delta yield CompletionResponse(text=partial, delta=delta) except Exception: continue 4. ä¸»ç¨‹åºï¼ˆmain.pyï¼‰ å®Œæ•´æµç¨‹ï¼šåŠ è½½ Notion æ–‡æ¡£ï¼Œæ„å»ºç´¢å¼•ï¼ŒæŒä¹…åŒ–ï¼Œå¾ªç¯é—®ç­”ã€‚\nimport os from dotenv import load_dotenv from llama_index.core import StorageContext, VectorStoreIndex, Settings from llama_index.embeddings.huggingface import HuggingFaceEmbedding from deepseek_llm import DeepSeekLLM from notion_loader import load_notion_all_docs load_dotenv() page_id = os.getenv(\"NOTION_PAGE_ID\") deepseek_api_key = os.getenv(\"DEEPSEEK_API_KEY\") # é…ç½® LLM å’ŒåµŒå…¥æ¨¡å‹ Settings.llm = DeepSeekLLM(api_key=deepseek_api_key) Settings.embed_model = HuggingFaceEmbedding(model_name=\"BAAI/bge-small-en-v1.5\") def ask(index, query: str): engine = index.as_query_engine(llm=Settings.llm) return engine.query(query) if __name__ == \"__main__\": print(\"ğŸ“„ å¼€å§‹åŠ è½½ Notion æ–‡æ¡£...\") docs = load_notion_all_docs(page_id) print(f\"ğŸ“„ åŠ è½½æ–‡æ¡£å®Œæˆï¼Œæ–‡æ¡£æ•°é‡ï¼š{len(docs)}\") print(\"ğŸ” å¼€å§‹æ„å»ºç´¢å¼•...\") index = VectorStoreIndex.from_documents(docs) index.storage_context.persist(persist_dir=\"storage\") print(\"âœ… ç´¢å¼•æ„å»ºå®Œæˆå¹¶æŒä¹…åŒ–\") while True: q = input(\"ğŸ” è¯·è¾“å…¥é—®é¢˜ï¼ˆè¾“å…¥ exit æˆ– quit é€€å‡ºï¼‰ï¼š\") if q.strip().lower() in [\"exit\", \"quit\"]: break answer = ask(index, q) print(\"ğŸ’¬ å›ç­”ï¼š\", answer) ç¤ºä¾‹æµ‹è¯•æ•°æ® ä¸ºäº†éªŒè¯æˆ‘ä»¬çš„é—®ç­”ç³»ç»Ÿæ•ˆæœï¼Œç”¨GPT Mockäº†ä¸¤æ®µå†…å®¹ï¼Œæˆ‘ä»¬åœ¨ Notion ä¸­åˆ›å»ºäº†ä¸¤ä¸ªå­é¡µé¢ï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆä»¥ä¸‹æ˜¯ç¤ºæ„å†…å®¹èŠ‚é€‰ï¼‰ï¼š\nğŸ“„ å­é¡µé¢ä¸€ï¼š æé›·çš„çˆ¸çˆ¸å«å¼ ä¸‰ï¼Œå¦ˆå¦ˆå«ç‹èŠ³ï¼Œå§å§å«ææ¢…ã€‚ éŸ©æ¢…æ¢…çš„ç”·æœ‹å‹æ˜¯æé›·ã€‚ å¼ ä¸‰æ˜¯ä¸€åå»ºç­‘å·¥ç¨‹å¸ˆï¼Œæ¯•ä¸šäºæ¸…åå¤§å­¦åœŸæœ¨å·¥ç¨‹ç³»ã€‚ ç‹èŠ³æ˜¯ä¸€ä½åŒ»ç”Ÿï¼Œæ›¾åœ¨åŒ—äº¬åå’ŒåŒ»é™¢å·¥ä½œåå¹´ã€‚ ç‹å°æ˜å‡ºç”Ÿäº2000å¹´5æœˆ4æ—¥ï¼Œæ˜¯ä¸€åç¨‹åºå‘˜ï¼Œæ“…é•¿Pythonå’ŒGoè¯­è¨€ã€‚ ç‹å°æ˜åœ¨2023å¹´åŠ å…¥äº†å­—èŠ‚è·³åŠ¨ï¼Œæ‹…ä»»åç«¯å¼€å‘å·¥ç¨‹å¸ˆã€‚ å¤§ç™½æ˜¯ä¸€åªä¸‰å²çš„è¨æ‘©è€¶çŠ¬ï¼Œå®ƒçš„ä¸»äººæ˜¯éŸ©æ¢…æ¢…ã€‚ éŸ©æ¢…æ¢…å®¶ä½åœ¨åŒ—äº¬å¸‚æœé˜³åŒºå¹¸ç¦è·¯88å·ã€‚ ğŸ“„ å­é¡µé¢äºŒï¼š ã€Šå¾®ç§¯åˆ†å…¥é—¨ã€‹æ˜¯ç”±é™ˆå»ºåæ•™æˆç¼–å†™çš„ä¸€æœ¬æ•°å­¦æ•™æï¼Œé€‚ç”¨äºå¤§ä¸€å­¦ç”Ÿã€‚ ã€Šç°ä»£æ“ä½œç³»ç»Ÿã€‹æ˜¯ç”± Andrew S. Tanenbaum ç¼–å†™çš„ï¼Œè¢«å¹¿æ³›ç”¨äºè®¡ç®—æœºä¸“ä¸šè¯¾ç¨‹ã€‚ ç™¾åº¦æ˜¯ç”±æå½¦å®äº2000å¹´åˆ›å»ºçš„ï¼Œæ€»éƒ¨ä½äºåŒ—äº¬å¸‚æµ·æ·€åŒºã€‚ é˜¿é‡Œå·´å·´çš„åˆ›å§‹äººæ˜¯é©¬äº‘ï¼Œæˆç«‹äº1999å¹´ï¼Œæ€»éƒ¨ä½äºæ­å·ã€‚ åœ°çƒæ˜¯å¤ªé˜³ç³»ä¸­çš„ç¬¬ä¸‰é¢—è¡Œæ˜Ÿï¼Œå¹³å‡è·ç¦»å¤ªé˜³çº¦ä¸º1.5äº¿å…¬é‡Œã€‚ æ°´çš„åŒ–å­¦å¼æ˜¯Hâ‚‚Oï¼Œå¸¸æ¸©ä¸‹ä¸ºæ— è‰²æ— å‘³æ¶²ä½“ã€‚ æ—æ™“æ˜¯ä¸€åUIè®¾è®¡å¸ˆï¼Œæ¯•ä¸šäºä¸­å›½ç¾æœ¯å­¦é™¢ï¼Œç›®å‰åœ¨è…¾è®¯å·¥ä½œï¼Œè´Ÿè´£å¾®ä¿¡çš„ç•Œé¢è®¾è®¡ã€‚ æ—æ™“çš„è¡¨å“¥å«èµµå¼ºï¼Œæ˜¯ä¸€ä½ç½‘ç»œå®‰å…¨ä¸“å®¶ï¼Œåœ¨é˜¿é‡Œäº‘ä»»èŒã€‚ èµµå¼ºçš„å¦»å­æ˜¯æå¨œï¼Œæ›¾åœ¨åä¸ºå·¥ä½œï¼Œç°åœ¨æ˜¯ç‹¬ç«‹å®‰å…¨é¡¾é—®ã€‚ æå¨œå’Œæ—æ™“åœ¨2022å¹´å…±åŒå‚ä¸äº†ä¸€ä¸ªå…³äºâ€œç”¨æˆ·éšç§ä¿æŠ¤â€çš„ç ”ç©¶é¡¹ç›®ã€‚ æ—æ™“çš„ç”·æœ‹å‹å«é™ˆå®‡ï¼Œæ˜¯ä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œç²¾é€šVueå’ŒReactã€‚ é™ˆå®‡åœ¨2021å¹´ä»ç½‘æ˜“è·³æ§½åˆ°äº†ç¾å›¢ï¼Œç›®å‰å±…ä½åœ¨ä¸Šæµ·æµ¦ä¸œæ–°åŒºã€‚ é™ˆå®‡å’Œèµµå¼ºåœ¨ä¸€æ¬¡é»‘å®¢é©¬æ‹‰æ¾æ¯”èµ›ä¸­è®¤è¯†ï¼Œå½“æ—¶ä»–ä»¬çš„é˜Ÿä¼è·å¾—äº†ä¸€ç­‰å¥–ã€‚ èµµå¼ºçš„çˆ¶äº²èµµäº‘ï¼Œæ˜¯ä¸€ä½é€€ä¼‘å†›äººï¼Œæ›¾æœå½¹äºå¹¿å·å†›åŒºã€‚ èµµäº‘éå¸¸å–œæ¬¢ä¹¦æ³•ï¼Œç»å¸¸åœ¨ç¤¾åŒºæ´»åŠ¨ä¸­å¿ƒæ•™è€äººå†™æ¯›ç¬”å­—ã€‚ æ—æ™“çš„å® ç‰©æ˜¯ä¸€åªè‹±çŸ­çŒ«ï¼Œåå­—å«â€œç°ç°â€ï¼Œä»Šå¹´ä¸¤å²ï¼Œæœ€å–œæ¬¢åƒå†»å¹²é¸¡è‚‰ã€‚ æµ‹è¯•æ•ˆæœ æ€»ç»“ LlamaIndex è®©å¤æ‚æ–‡æ¡£ç»“æ„å˜å¾—ç®€å• Notion æ–‡æ¡£ç”¨é€’å½’æ–¹å¼é‡‡é›†ï¼Œç»“æ„æ¸…æ™° DeepSeek LLM é€‚é…æ¥å£çµæ´»ï¼Œèƒ½ç”¨è‡ªå®šä¹‰æ¨¡å‹ å‘é‡ç´¢å¼•ç»“åˆåµŒå…¥æ¨¡å‹ï¼Œå¤§å¹…æå‡é—®ç­”è´¨é‡ æŒä¹…åŒ–ç´¢å¼•é¿å…é‡å¤æ„å»ºï¼Œæé«˜æ•ˆç‡ ","wordCount":"498","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://frank9306.github.io/posts/1111/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-llamaindex%E5%9F%BA%E4%BA%8E-notion-%E6%96%87%E6%A1%A3%E7%9A%84%E6%99%BA%E8%83%BD%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98-21f96f3e8e6e80f8a370f79d08eee6a7/"},"publisher":{"@type":"Organization","name":"xiaoliu's blog","logo":{"@type":"ImageObject","url":"https://frank9306.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://frank9306.github.io/ accesskey=h title="xiaoliu's blog (Alt + H)">xiaoliu's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://frank9306.github.io/ title=Services><span>Services</span></a></li><li><a href=https://frank9306.github.io/ title=About><span>About</span></a></li><li><a href=https://frank9306.github.io/ title=Contact><span>Contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent"></h1><div class=post-meta></div></header><div class=post-content><h1 id=æ·±å…¥ç†è§£-llamaindexåŸºäº-notion-æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®æˆ˜>æ·±å…¥ç†è§£ LlamaIndexï¼šåŸºäº Notion æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®æˆ˜<a hidden class=anchor aria-hidden=true href=#æ·±å…¥ç†è§£-llamaindexåŸºäº-notion-æ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®æˆ˜>#</a></h1><p>type: Post
status: Published
date: 2025/06/27
tags: ai, llamaindex, notion
category: æŠ€æœ¯åˆ†äº«</p><p>åœ¨äººå·¥æ™ºèƒ½æ—¥ç›Šèå…¥å¼€å‘è€…å·¥å…·é“¾çš„ä»Šå¤©ï¼Œæˆ‘æœ€åˆè®¡åˆ’ä½¿ç”¨ LangChain æ„å»ºä¸€ä¸ªåŸºäºæ–‡æ¡£çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚LangChain ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿå°†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸å„ç§æ•°æ®æºå’Œåº”ç”¨åœºæ™¯è¿æ¥èµ·æ¥ï¼Œçœ‹èµ·æ¥æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><p>ç„¶è€Œï¼Œåœ¨æ·±å…¥ç ”ç©¶å’Œå®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº† LlamaIndexï¼ˆå‰èº«ä¸º GPT Indexï¼‰è¿™ä¸ªæ›´ä¸ºä¸“æ³¨äºçŸ¥è¯†æ£€ç´¢å’Œé—®ç­”çš„æ¡†æ¶ã€‚LlamaIndex åœ¨å¤„ç†æ–‡æ¡£ç´¢å¼•ã€æ„å»ºçŸ¥è¯†åº“ä»¥åŠç”Ÿæˆä¸Šä¸‹æ–‡ç›¸å…³å›ç­”æ–¹é¢ï¼Œæä¾›äº†æ›´ä¸ºç²¾ç»†å’Œç›´è§‚çš„å·¥å…·ã€‚å°¤å…¶æ˜¯å¯¹äºæˆ‘è¿™ä¸ªéœ€è¦åŸºäº Notion æ–‡æ¡£æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿçš„åœºæ™¯ï¼ŒLlamaIndex æä¾›äº†æ›´åŠ æ— ç¼çš„é›†æˆä½“éªŒã€‚</p><p>æœ¬æ–‡å°†åˆ†äº«æˆ‘ä» LangChain è½¬å‘ LlamaIndex çš„ç»å†ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ LlamaIndex æ„å»ºä¸€ä¸ªèƒ½å¤Ÿç†è§£ã€æ£€ç´¢å¹¶å›ç­” Notion æ–‡æ¡£å†…å®¹çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚æ— è®ºä½ æ˜¯ AI å¼€å‘æ–°æ‰‹ï¼Œè¿˜æ˜¯å¯»æ‰¾æ›´é«˜æ•ˆæ–‡æ¡£å¤„ç†æ–¹æ¡ˆçš„èµ„æ·±å¼€å‘è€…ï¼Œå¸Œæœ›è¿™ç¯‡å®æˆ˜åˆ†äº«èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘ã€‚</p><h2 id=ä»€ä¹ˆæ˜¯-llamaindex>ä»€ä¹ˆæ˜¯ LlamaIndexï¼Ÿ<a hidden class=anchor aria-hidden=true href=#ä»€ä¹ˆæ˜¯-llamaindex>#</a></h2><p>LlamaIndexï¼ˆåŸå GPT Indexï¼‰æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¸®ä½ æŠŠå„ç§æ ¼å¼çš„æ–‡æ¡£å˜æˆç»“æ„åŒ–çš„ç´¢å¼•ï¼Œæ–¹ä¾¿å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”¨æ›´å°‘çš„ä¸Šä¸‹æ–‡è½»æ¾ç†è§£å’Œå›ç­”é—®é¢˜ã€‚ç®€å•è¯´å°±æ˜¯ï¼šå¸®ä½ æŠŠå¤§æµ·æé’ˆå˜æˆå°æ± å¡˜é’“é±¼ã€‚</p><p>å®˜ç½‘ï¼š<a href=https://www.llamaindex.ai/>https://www.llamaindex.ai/</a></p><hr><h2 id=æˆ‘ä»¬çš„ç›®æ ‡>æˆ‘ä»¬çš„ç›®æ ‡<a hidden class=anchor aria-hidden=true href=#æˆ‘ä»¬çš„ç›®æ ‡>#</a></h2><ul><li>ä» Notion åŠ è½½æ–‡æ¡£ï¼ˆä¸é™æ·±åº¦é€’å½’ï¼‰</li><li>ç”¨ HuggingFace çš„åµŒå…¥æ¨¡å‹åšå‘é‡åŒ–</li><li>è‡ªå®šä¹‰ DeepSeek LLM åšé—®ç­”</li><li>æŒä¹…åŒ–ç´¢å¼•ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ç”¨</li></ul><hr><h2 id=é¡¹ç›®ç»“æ„åŠä»£ç è¯´æ˜>é¡¹ç›®ç»“æ„åŠä»£ç è¯´æ˜<a hidden class=anchor aria-hidden=true href=#é¡¹ç›®ç»“æ„åŠä»£ç è¯´æ˜>#</a></h2><h3 id=1-ç¯å¢ƒå‡†å¤‡>1. ç¯å¢ƒå‡†å¤‡<a hidden class=anchor aria-hidden=true href=#1-ç¯å¢ƒå‡†å¤‡>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span>pip install llama-index notion-client python-dotenv requests
</span></span></code></pre></div><p>å¹¶ä¸”ä½ éœ€è¦åœ¨ <code>.env</code> æ–‡ä»¶é‡Œé…ç½®ï¼š</p><pre tabindex=0><code>
NOTION_TOKEN=ä½ çš„Notioné›†æˆToken
NOTION_PAGE_ID=ä½ çš„Notioné¡µé¢ID
DEEPSEEK_API_KEY=ä½ çš„DeepSeek APIå¯†é’¥
</code></pre><p><code>llama_index</code> é»˜è®¤æ˜¯ä½¿ç”¨openaiçš„ï¼Œä½†æ˜¯æ²¡ä¹°ï¼Œé¡ºä¾¿ä¹Ÿçœ‹ä¸‹å¦‚ä½•è‡ªå®šä¹‰æ¨¡å‹ã€‚å¦å¤–<code>NOTION_TOKEN</code> å’Œ <code>NOTION_PAGE_ID</code> è·å–å°±ä¸åœ¨èµ˜è¿°ã€‚</p><hr><h3 id=2-notion-æ–‡æ¡£åŠ è½½å·¥å…·notion_loaderpy>2. Notion æ–‡æ¡£åŠ è½½å·¥å…·ï¼ˆ<code>notion_loader.py</code>ï¼‰<a hidden class=anchor aria-hidden=true href=#2-notion-æ–‡æ¡£åŠ è½½å·¥å…·notion_loaderpy>#</a></h3><p>è´Ÿè´£é€’å½’æŠ“å– Notion é¡µé¢åŠå­é¡µé¢æ–‡æœ¬ï¼Œè¿”å› <code>List[Document]</code>ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> notion_client <span style=color:#f92672>import</span> Client
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> llama_index.core.schema <span style=color:#f92672>import</span> Document
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> dotenv <span style=color:#f92672>import</span> load_dotenv
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> List
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>load_dotenv()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>notion <span style=color:#f92672>=</span> Client(auth<span style=color:#f92672>=</span>os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;NOTION_TOKEN&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>load_notion_all_docs</span>(page_id: str) <span style=color:#f92672>-&gt;</span> List[Document]:
</span></span><span style=display:flex><span>    docs <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>recurse_blocks</span>(block_id: str):
</span></span><span style=display:flex><span>        children <span style=color:#f92672>=</span> notion<span style=color:#f92672>.</span>blocks<span style=color:#f92672>.</span>children<span style=color:#f92672>.</span>list(block_id)<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;results&#34;</span>, [])
</span></span><span style=display:flex><span>        texts <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> block <span style=color:#f92672>in</span> children:
</span></span><span style=display:flex><span>            b_type <span style=color:#f92672>=</span> block[<span style=color:#e6db74>&#34;type&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> b_type <span style=color:#f92672>in</span> [<span style=color:#e6db74>&#34;paragraph&#34;</span>, <span style=color:#e6db74>&#34;heading_1&#34;</span>, <span style=color:#e6db74>&#34;heading_2&#34;</span>, <span style=color:#e6db74>&#34;heading_3&#34;</span>]:
</span></span><span style=display:flex><span>                rich_text <span style=color:#f92672>=</span> block[b_type]<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;rich_text&#34;</span>, [])
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> rich_text:
</span></span><span style=display:flex><span>                    texts<span style=color:#f92672>.</span>append(<span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>.</span>join([t<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;plain_text&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>) <span style=color:#66d9ef>for</span> t <span style=color:#f92672>in</span> rich_text]))
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>elif</span> b_type <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;child_page&#34;</span>:
</span></span><span style=display:flex><span>                child_page_id <span style=color:#f92672>=</span> block[<span style=color:#e6db74>&#34;id&#34;</span>]
</span></span><span style=display:flex><span>                docs<span style=color:#f92672>.</span>extend(load_notion_all_docs(child_page_id))
</span></span><span style=display:flex><span>            <span style=color:#75715e># ä½ è¿˜å¯ä»¥æ ¹æ®éœ€æ±‚æ‰©å±•å¤„ç†ä»£ç å—ã€å¼•ç”¨å—ç­‰</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> texts:
</span></span><span style=display:flex><span>            docs<span style=color:#f92672>.</span>append(Document(text<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>join(texts), metadata<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;source&#34;</span>: block_id}))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    recurse_blocks(page_id)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> docs
</span></span></code></pre></div><hr><h3 id=3-deepseek-è‡ªå®šä¹‰-llm-é€‚é…å™¨deepseek_llmpy>3. DeepSeek è‡ªå®šä¹‰ LLM é€‚é…å™¨ï¼ˆ<code>deepseek_llm.py</code>ï¼‰<a hidden class=anchor aria-hidden=true href=#3-deepseek-è‡ªå®šä¹‰-llm-é€‚é…å™¨deepseek_llmpy>#</a></h3><p>å®ç°äº† <code>CustomLLM</code>ï¼Œå¯¹æ¥ DeepSeek APIï¼Œæ”¯æŒåŒæ­¥å’Œæµå¼è¿”å›ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> Any, Generator
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> requests
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pydantic <span style=color:#f92672>import</span> Field
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> llama_index.core.llms <span style=color:#f92672>import</span> CustomLLM, CompletionResponse, CompletionResponseGen, LLMMetadata
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> llama_index.core.llms.callbacks <span style=color:#f92672>import</span> llm_completion_callback
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DeepSeekLLM</span>(CustomLLM):
</span></span><span style=display:flex><span>    api_key: str <span style=color:#f92672>=</span> Field(<span style=color:#f92672>...</span>)
</span></span><span style=display:flex><span>    api_base: str <span style=color:#f92672>=</span> Field(default<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://api.deepseek.com/v1&#34;</span>)
</span></span><span style=display:flex><span>    model_name: str <span style=color:#f92672>=</span> Field(default<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;deepseek-chat&#34;</span>)
</span></span><span style=display:flex><span>    temperature: float <span style=color:#f92672>=</span> Field(default<span style=color:#f92672>=</span><span style=color:#ae81ff>0.7</span>)
</span></span><span style=display:flex><span>    max_tokens: int <span style=color:#f92672>=</span> Field(default<span style=color:#f92672>=</span><span style=color:#ae81ff>1024</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@property</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>metadata</span>(self) <span style=color:#f92672>-&gt;</span> LLMMetadata:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> LLMMetadata(
</span></span><span style=display:flex><span>            context_window<span style=color:#f92672>=</span><span style=color:#ae81ff>8192</span>,
</span></span><span style=display:flex><span>            num_output<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>max_tokens,
</span></span><span style=display:flex><span>            model_name<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>model_name,
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>_request</span>(self, prompt: str, stream: bool <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>):
</span></span><span style=display:flex><span>        headers <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Authorization&#34;</span>: <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Bearer </span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>api_key<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Content-Type&#34;</span>: <span style=color:#e6db74>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        body <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;model&#34;</span>: self<span style=color:#f92672>.</span>model_name,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;messages&#34;</span>: [{<span style=color:#e6db74>&#34;role&#34;</span>: <span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;content&#34;</span>: prompt}],
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;temperature&#34;</span>: self<span style=color:#f92672>.</span>temperature,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;max_tokens&#34;</span>: self<span style=color:#f92672>.</span>max_tokens,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;stream&#34;</span>: stream,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        res <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>post(
</span></span><span style=display:flex><span>            <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>api_base<span style=color:#e6db74>}</span><span style=color:#e6db74>/chat/completions&#34;</span>,
</span></span><span style=display:flex><span>            headers<span style=color:#f92672>=</span>headers,
</span></span><span style=display:flex><span>            json<span style=color:#f92672>=</span>body,
</span></span><span style=display:flex><span>            stream<span style=color:#f92672>=</span>stream,
</span></span><span style=display:flex><span>            timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>60</span>,
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>        res<span style=color:#f92672>.</span>raise_for_status()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> res
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@llm_completion_callback</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>complete</span>(self, prompt: str, <span style=color:#f92672>**</span>kwargs: Any) <span style=color:#f92672>-&gt;</span> CompletionResponse:
</span></span><span style=display:flex><span>        res <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>_request(prompt, stream<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>        data <span style=color:#f92672>=</span> res<span style=color:#f92672>.</span>json()
</span></span><span style=display:flex><span>        message <span style=color:#f92672>=</span> data[<span style=color:#e6db74>&#34;choices&#34;</span>][<span style=color:#ae81ff>0</span>][<span style=color:#e6db74>&#34;message&#34;</span>][<span style=color:#e6db74>&#34;content&#34;</span>]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> CompletionResponse(text<span style=color:#f92672>=</span>message)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@llm_completion_callback</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>stream_complete</span>(self, prompt: str, <span style=color:#f92672>**</span>kwargs: Any) <span style=color:#f92672>-&gt;</span> CompletionResponseGen:
</span></span><span style=display:flex><span>        res <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>_request(prompt, stream<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        partial <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> res<span style=color:#f92672>.</span>iter_lines(decode_unicode<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> line<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#34;data: &#34;</span>):
</span></span><span style=display:flex><span>                line <span style=color:#f92672>=</span> line[len(<span style=color:#e6db74>&#34;data: &#34;</span>):]
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> line<span style=color:#f92672>.</span>strip() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;[DONE]&#34;</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>                data <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(line)
</span></span><span style=display:flex><span>                delta <span style=color:#f92672>=</span> data[<span style=color:#e6db74>&#34;choices&#34;</span>][<span style=color:#ae81ff>0</span>][<span style=color:#e6db74>&#34;delta&#34;</span>]<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;content&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>                partial <span style=color:#f92672>+=</span> delta
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>yield</span> CompletionResponse(text<span style=color:#f92672>=</span>partial, delta<span style=color:#f92672>=</span>delta)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>continue</span>
</span></span></code></pre></div><hr><h3 id=4-ä¸»ç¨‹åºmainpy>4. ä¸»ç¨‹åºï¼ˆ<code>main.py</code>ï¼‰<a hidden class=anchor aria-hidden=true href=#4-ä¸»ç¨‹åºmainpy>#</a></h3><p>å®Œæ•´æµç¨‹ï¼šåŠ è½½ Notion æ–‡æ¡£ï¼Œæ„å»ºç´¢å¼•ï¼ŒæŒä¹…åŒ–ï¼Œå¾ªç¯é—®ç­”ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> dotenv <span style=color:#f92672>import</span> load_dotenv
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> llama_index.core <span style=color:#f92672>import</span> StorageContext, VectorStoreIndex, Settings
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> llama_index.embeddings.huggingface <span style=color:#f92672>import</span> HuggingFaceEmbedding
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> deepseek_llm <span style=color:#f92672>import</span> DeepSeekLLM
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> notion_loader <span style=color:#f92672>import</span> load_notion_all_docs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>load_dotenv()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>page_id <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;NOTION_PAGE_ID&#34;</span>)
</span></span><span style=display:flex><span>deepseek_api_key <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;DEEPSEEK_API_KEY&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># é…ç½® LLM å’ŒåµŒå…¥æ¨¡å‹</span>
</span></span><span style=display:flex><span>Settings<span style=color:#f92672>.</span>llm <span style=color:#f92672>=</span> DeepSeekLLM(api_key<span style=color:#f92672>=</span>deepseek_api_key)
</span></span><span style=display:flex><span>Settings<span style=color:#f92672>.</span>embed_model <span style=color:#f92672>=</span> HuggingFaceEmbedding(model_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;BAAI/bge-small-en-v1.5&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ask</span>(index, query: str):
</span></span><span style=display:flex><span>    engine <span style=color:#f92672>=</span> index<span style=color:#f92672>.</span>as_query_engine(llm<span style=color:#f92672>=</span>Settings<span style=color:#f92672>.</span>llm)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> engine<span style=color:#f92672>.</span>query(query)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;ğŸ“„ å¼€å§‹åŠ è½½ Notion æ–‡æ¡£...&#34;</span>)
</span></span><span style=display:flex><span>    docs <span style=color:#f92672>=</span> load_notion_all_docs(page_id)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“„ åŠ è½½æ–‡æ¡£å®Œæˆï¼Œæ–‡æ¡£æ•°é‡ï¼š</span><span style=color:#e6db74>{</span>len(docs)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;ğŸ” å¼€å§‹æ„å»ºç´¢å¼•...&#34;</span>)
</span></span><span style=display:flex><span>    index <span style=color:#f92672>=</span> VectorStoreIndex<span style=color:#f92672>.</span>from_documents(docs)
</span></span><span style=display:flex><span>    index<span style=color:#f92672>.</span>storage_context<span style=color:#f92672>.</span>persist(persist_dir<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;storage&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;âœ… ç´¢å¼•æ„å»ºå®Œæˆå¹¶æŒä¹…åŒ–&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>        q <span style=color:#f92672>=</span> input(<span style=color:#e6db74>&#34;ğŸ” è¯·è¾“å…¥é—®é¢˜ï¼ˆè¾“å…¥ exit æˆ– quit é€€å‡ºï¼‰ï¼š&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> q<span style=color:#f92672>.</span>strip()<span style=color:#f92672>.</span>lower() <span style=color:#f92672>in</span> [<span style=color:#e6db74>&#34;exit&#34;</span>, <span style=color:#e6db74>&#34;quit&#34;</span>]:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>        answer <span style=color:#f92672>=</span> ask(index, q)
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;ğŸ’¬ å›ç­”ï¼š&#34;</span>, answer)
</span></span></code></pre></div><hr><h2 id=ç¤ºä¾‹æµ‹è¯•æ•°æ®>ç¤ºä¾‹æµ‹è¯•æ•°æ®<a hidden class=anchor aria-hidden=true href=#ç¤ºä¾‹æµ‹è¯•æ•°æ®>#</a></h2><p>ä¸ºäº†éªŒè¯æˆ‘ä»¬çš„é—®ç­”ç³»ç»Ÿæ•ˆæœï¼Œç”¨GPT Mockäº†ä¸¤æ®µå†…å®¹ï¼Œæˆ‘ä»¬åœ¨ Notion ä¸­åˆ›å»ºäº†ä¸¤ä¸ªå­é¡µé¢ï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆä»¥ä¸‹æ˜¯ç¤ºæ„å†…å®¹èŠ‚é€‰ï¼‰ï¼š</p><h3 id=-å­é¡µé¢ä¸€>ğŸ“„ å­é¡µé¢ä¸€ï¼š<a hidden class=anchor aria-hidden=true href=#-å­é¡µé¢ä¸€>#</a></h3><pre tabindex=0><code>
æé›·çš„çˆ¸çˆ¸å«å¼ ä¸‰ï¼Œå¦ˆå¦ˆå«ç‹èŠ³ï¼Œå§å§å«ææ¢…ã€‚
éŸ©æ¢…æ¢…çš„ç”·æœ‹å‹æ˜¯æé›·ã€‚
å¼ ä¸‰æ˜¯ä¸€åå»ºç­‘å·¥ç¨‹å¸ˆï¼Œæ¯•ä¸šäºæ¸…åå¤§å­¦åœŸæœ¨å·¥ç¨‹ç³»ã€‚
ç‹èŠ³æ˜¯ä¸€ä½åŒ»ç”Ÿï¼Œæ›¾åœ¨åŒ—äº¬åå’ŒåŒ»é™¢å·¥ä½œåå¹´ã€‚

ç‹å°æ˜å‡ºç”Ÿäº2000å¹´5æœˆ4æ—¥ï¼Œæ˜¯ä¸€åç¨‹åºå‘˜ï¼Œæ“…é•¿Pythonå’ŒGoè¯­è¨€ã€‚
ç‹å°æ˜åœ¨2023å¹´åŠ å…¥äº†å­—èŠ‚è·³åŠ¨ï¼Œæ‹…ä»»åç«¯å¼€å‘å·¥ç¨‹å¸ˆã€‚

å¤§ç™½æ˜¯ä¸€åªä¸‰å²çš„è¨æ‘©è€¶çŠ¬ï¼Œå®ƒçš„ä¸»äººæ˜¯éŸ©æ¢…æ¢…ã€‚
éŸ©æ¢…æ¢…å®¶ä½åœ¨åŒ—äº¬å¸‚æœé˜³åŒºå¹¸ç¦è·¯88å·ã€‚
</code></pre><h3 id=-å­é¡µé¢äºŒ>ğŸ“„ å­é¡µé¢äºŒï¼š<a hidden class=anchor aria-hidden=true href=#-å­é¡µé¢äºŒ>#</a></h3><pre tabindex=0><code>
ã€Šå¾®ç§¯åˆ†å…¥é—¨ã€‹æ˜¯ç”±é™ˆå»ºåæ•™æˆç¼–å†™çš„ä¸€æœ¬æ•°å­¦æ•™æï¼Œé€‚ç”¨äºå¤§ä¸€å­¦ç”Ÿã€‚
ã€Šç°ä»£æ“ä½œç³»ç»Ÿã€‹æ˜¯ç”± Andrew S. Tanenbaum ç¼–å†™çš„ï¼Œè¢«å¹¿æ³›ç”¨äºè®¡ç®—æœºä¸“ä¸šè¯¾ç¨‹ã€‚

ç™¾åº¦æ˜¯ç”±æå½¦å®äº2000å¹´åˆ›å»ºçš„ï¼Œæ€»éƒ¨ä½äºåŒ—äº¬å¸‚æµ·æ·€åŒºã€‚
é˜¿é‡Œå·´å·´çš„åˆ›å§‹äººæ˜¯é©¬äº‘ï¼Œæˆç«‹äº1999å¹´ï¼Œæ€»éƒ¨ä½äºæ­å·ã€‚

åœ°çƒæ˜¯å¤ªé˜³ç³»ä¸­çš„ç¬¬ä¸‰é¢—è¡Œæ˜Ÿï¼Œå¹³å‡è·ç¦»å¤ªé˜³çº¦ä¸º1.5äº¿å…¬é‡Œã€‚
æ°´çš„åŒ–å­¦å¼æ˜¯Hâ‚‚Oï¼Œå¸¸æ¸©ä¸‹ä¸ºæ— è‰²æ— å‘³æ¶²ä½“ã€‚

æ—æ™“æ˜¯ä¸€åUIè®¾è®¡å¸ˆï¼Œæ¯•ä¸šäºä¸­å›½ç¾æœ¯å­¦é™¢ï¼Œç›®å‰åœ¨è…¾è®¯å·¥ä½œï¼Œè´Ÿè´£å¾®ä¿¡çš„ç•Œé¢è®¾è®¡ã€‚
æ—æ™“çš„è¡¨å“¥å«èµµå¼ºï¼Œæ˜¯ä¸€ä½ç½‘ç»œå®‰å…¨ä¸“å®¶ï¼Œåœ¨é˜¿é‡Œäº‘ä»»èŒã€‚

èµµå¼ºçš„å¦»å­æ˜¯æå¨œï¼Œæ›¾åœ¨åä¸ºå·¥ä½œï¼Œç°åœ¨æ˜¯ç‹¬ç«‹å®‰å…¨é¡¾é—®ã€‚
æå¨œå’Œæ—æ™“åœ¨2022å¹´å…±åŒå‚ä¸äº†ä¸€ä¸ªå…³äºâ€œç”¨æˆ·éšç§ä¿æŠ¤â€çš„ç ”ç©¶é¡¹ç›®ã€‚

æ—æ™“çš„ç”·æœ‹å‹å«é™ˆå®‡ï¼Œæ˜¯ä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œç²¾é€šVueå’ŒReactã€‚
é™ˆå®‡åœ¨2021å¹´ä»ç½‘æ˜“è·³æ§½åˆ°äº†ç¾å›¢ï¼Œç›®å‰å±…ä½åœ¨ä¸Šæµ·æµ¦ä¸œæ–°åŒºã€‚

é™ˆå®‡å’Œèµµå¼ºåœ¨ä¸€æ¬¡é»‘å®¢é©¬æ‹‰æ¾æ¯”èµ›ä¸­è®¤è¯†ï¼Œå½“æ—¶ä»–ä»¬çš„é˜Ÿä¼è·å¾—äº†ä¸€ç­‰å¥–ã€‚

èµµå¼ºçš„çˆ¶äº²èµµäº‘ï¼Œæ˜¯ä¸€ä½é€€ä¼‘å†›äººï¼Œæ›¾æœå½¹äºå¹¿å·å†›åŒºã€‚
èµµäº‘éå¸¸å–œæ¬¢ä¹¦æ³•ï¼Œç»å¸¸åœ¨ç¤¾åŒºæ´»åŠ¨ä¸­å¿ƒæ•™è€äººå†™æ¯›ç¬”å­—ã€‚

æ—æ™“çš„å® ç‰©æ˜¯ä¸€åªè‹±çŸ­çŒ«ï¼Œåå­—å«â€œç°ç°â€ï¼Œä»Šå¹´ä¸¤å²ï¼Œæœ€å–œæ¬¢åƒå†»å¹²é¸¡è‚‰ã€‚
</code></pre><hr><h2 id=æµ‹è¯•æ•ˆæœ>æµ‹è¯•æ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æµ‹è¯•æ•ˆæœ>#</a></h2><p><img alt=image.png loading=lazy src=image.png></p><hr><h2 id=æ€»ç»“>æ€»ç»“<a hidden class=anchor aria-hidden=true href=#æ€»ç»“>#</a></h2><ul><li>LlamaIndex è®©å¤æ‚æ–‡æ¡£ç»“æ„å˜å¾—ç®€å•</li><li>Notion æ–‡æ¡£ç”¨é€’å½’æ–¹å¼é‡‡é›†ï¼Œç»“æ„æ¸…æ™°</li><li>DeepSeek LLM é€‚é…æ¥å£çµæ´»ï¼Œèƒ½ç”¨è‡ªå®šä¹‰æ¨¡å‹</li><li>å‘é‡ç´¢å¼•ç»“åˆåµŒå…¥æ¨¡å‹ï¼Œå¤§å¹…æå‡é—®ç­”è´¨é‡</li><li>æŒä¹…åŒ–ç´¢å¼•é¿å…é‡å¤æ„å»ºï¼Œæé«˜æ•ˆç‡</li></ul><hr></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://frank9306.github.io/>xiaoliu's blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>